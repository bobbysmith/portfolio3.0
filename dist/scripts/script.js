"use strict";function generateAutomata(){ruleNumber=Math.floor(256*Math.random())+0,background.innerHTML="",currentRule.innerHTML='<a href="http://atlas.wolfram.com/01/01/'+ruleNumber+'/" target="_blank" rel="noopener noreferrer">rule '+ruleNumber+"</a>";var e=document.createElement("div");e.setAttribute("class","row"),background.appendChild(e);for(var t=1;t<background.clientWidth/8;t++){var r=document.createElement("div");e.appendChild(r)}randomizeRow(e);for(var o=1;o<background.clientHeight/8;o++)duplicateRow()}function numberToBooleanArray(e){for(var t=Number(e).toString(2),r=[];t.length<8;)t=0+t;for(var o=0;o<t.length;o++)r.push(!!parseInt(t[o]));return r}function randomizeRow(e){for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];r.classList.add(Math.floor(2*Math.random())?"active":"inactive")}}function duplicateRow(){var e=document.querySelectorAll(".row"),t=e[e.length-1],r=t.cloneNode(!0);background.appendChild(r),processRow(r,t)}function processRow(e,t){for(var r=0;r<e.childNodes.length;r++)for(var o=e.childNodes[r],n=t.childNodes[r],a=n.previousElementSibling||t.childNodes[t.childNodes.length-1],l=n.nextElementSibling||t.childNodes[0],c=setActiveIfMatchesRule.bind(null,o,a,n,l),u=0;u<rulesLegend.length;u++)c(rulesLegend[u],numberToBooleanArray(ruleNumber)[u])}function setActiveIfMatchesRule(e,t,r,o,n,a){var l=state(t)===n[0]&&state(r)===n[1]&&state(o)===n[2];l&&toggleActive(e,a)}function state(e){return e.classList.contains("active")?1:0}function toggleActive(e,t){t?(e.classList.remove("inactive"),e.classList.add("active")):(e.classList.remove("active"),e.classList.add("inactive"))}var background=document.querySelector(".background"),row=document.querySelector(".row"),currentRule=document.querySelector(".rule--current"),newRuleButton=document.querySelector("button"),rulesLegend=[[1,1,1],[1,1,0],[1,0,1],[1,0,0],[0,1,1],[0,1,0],[0,0,1],[0,0,0]],ruleNumber=void 0;generateAutomata(),newRuleButton.addEventListener("click",generateAutomata),console.log(" _____ _____ __    __    _____\n|  |  |   __|  |  |  |  |     |\n|     |   __|  |__|  |__|  |  |\n|__|__|_____|_____|_____|_____|"),console.log("i see you like poking around in the dev console. i do too.\nlet's work together.");